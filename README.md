# 1. –¢–µ–º–∞ –∏ —Ü–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
## 1.1 –¢–µ–º–∞
[–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã](https://yandex.ru/maps) - —ç—Ç–æ —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏, –∞ —Ç–∞–∫–∂–µ –æ –º–µ—Å—Ç–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏. –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–∏—Å–∫–∞ –º–µ—Å—Ç, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ—Å—Ç–∞—Ö, –∞ —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç–∑—ã–≤—ã –æ –º–µ—Å—Ç–∞—Ö.

## 1.2 –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
–í –¥–µ–∫–∞–±—Ä–µ 2022 –≥–æ–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π —Å–µ—Ä–≤–∏—Å–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ 24 –º–ª–Ω. –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π [^1] –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü. –≠—Ç–æ –æ–∫–æ–ª–æ 800 —Ç—ã—Å. –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –≤ –¥–µ–Ω—å. –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ [^2] –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å—Ç—Ä–∞–Ω—ã –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è:
| –°—Ç—Ä–∞–Ω–∞ | –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π |
| --- | --- |
| üá∑üá∫ –†–æ—Å—Å–∏—è | 90.08% |
| üá∫üá¶ –£–∫—Ä–∞–∏–Ω–∞ | 2.35% |
| üá∞üáø –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω | 1.75% |
| üá©üá™ –ì–µ—Ä–º–∞–Ω–∏—è | 1.22% |
| üáπüá∑ –¢—É—Ä—Ü–∏—è | 0.92% |
| üåê –î—Ä—É–≥–∏–µ | 3.68% |

## 1.3 MVP (Minimum Viable Product)
- –ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –º–∞–≥–∞–∑–∏–Ω–æ–≤, –±–∞–Ω–∫–æ–º–∞—Ç–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞—Ö
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ –æ –º–µ—Å—Ç–∞—Ö
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –º–µ—Å—Ç
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ

# 2. –†–∞—Å—á–µ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏
## 2.1 –ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –ú–µ—Å—è—á–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è - 24 –º–ª–Ω. –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π [^1]
- –°—É—Ç–æ—á–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è - 800 —Ç—ã—Å. –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏ (–≤—Ä–µ–º—è, –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω–æ–µ –Ω–∞ —Å–∞–π—Ç–µ) - 00:01:58 [^2]
- –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ —Å–µ—Å—Å–∏–∏ - 14.38 [^2]

–ù–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ [^3] –æ —Å–µ—Ä–≤–∏—Å–µ Google –∏–∑–≤–µ—Å—Ç–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–µ—Å—Å–∏–∏ –Ω–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º —Å–µ—Ä–≤–∏—Å–∞:
![Google Maps Session Time Distribution](./imgs/map_usage.png)
–≠—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –æ–±–ª–∞–¥–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Ç–µ–º–∞—Ç–∏–∫–æ–π –∏ —Å—Ö–æ–∂–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º/—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º.
- Maps Map-View Manipulations (–ø—Ä–æ—Å–º–æ—Ç—Ä, –∑—É–º, —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ –∫–∞—Ä—Ç—ã) –∑–∞–Ω–∏–º–∞—é—Ç 67.5% –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å–µ—Å—Å–∏–∏, —Ç–æ –µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ 79 —Å–µ–∫, —É—á–∏—Ç—ã–≤–∞—è –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏ –Ω–∞ —Å–µ—Ä–≤–∏—Å–µ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞ –¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–∏—Ç —ç–∫—Ä–∞–Ω —Å –∫–∞—Ä—Ç–∞–º–∏ –æ–∫–æ–ª–æ 10 —Ä–∞–∑. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª–æ–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã –∏–ª–∏ –µ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã, —Ç–æ –µ—Å—Ç—å –∑–∞–ø—Ä–æ—Å —Ç–∞–π–ª–æ–≤ –∫–∞—Ä—Ç—ã, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∞ —Å–æ—Å—Ç–æ–∏—Ç. –†–∞–∑–º–µ—Ä —Ç–∞–π–ª–æ–≤, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —Ä–∞–≤–µ–Ω 256x256 –ø–∏–∫—Å–µ–ª–µ–π. –î–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è —ç–∫—Ä–∞–Ω–∞ 1920x1080 –ø–∏–∫—Å–µ–ª–µ–π –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è 40 —Ç–∞–π–ª–æ–≤. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∑–∞ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏ –±—É–¥–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å—Å—è `10 * 40 = 400` —Ç–∞–π–ª–æ–≤.
- Direction (–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤) –∑–∞–Ω–∏–º–∞–µ—Ç 21.1% –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å–µ—Å—Å–∏–∏, —Ç–æ –µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ 24 —Å–µ–∫, –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞ –¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è —Å–¥–µ–ª–∞–µ—Ç 2 –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞.
- Place –∏ Search (–≥–µ–æ–∫–æ–¥–∏–Ω–≥) –∑–∞–Ω–∏–º–∞—é—Ç 11.4% –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å–µ—Å—Å–∏–∏, —Ç–æ –µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ 13 —Å–µ–∫, –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞ –¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è —Å–¥–µ–ª–∞–µ—Ç 5 –∑–∞–ø—Ä–æ—Å–æ–≤.


## 2.2 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

### 2.2.1 –†–∞—Å—á–µ—Ç RPS
–ü—Ä–æ–∏–∑–≤–µ–¥–µ–º —Ä–∞—Å—á–µ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–∏—Å —Å —É—á–µ—Ç–æ–º —Å–ª–µ–¥—É—é—â–∏—Ö –¥–æ–ø—É—â–µ–Ω–∏–π:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–µ—Ä–≤–∏—Å —Å—Ç—Ä–æ–≥–æ 2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å.
- –ó–∞–ø—Ä–æ—Å—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è (24 —á–∞—Å–æ–≤).
- –ê—É–¥–∏—Ç–æ—Ä–∏—è —Å–µ—Ä–≤–∏—Å–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ –≤–æ –≤—Å–µ—Ö —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–∞—Ö.
–¢–æ–≥–¥–∞:
1. –ì–µ–æ–∫–æ–¥–∏–Ω–≥: `800000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 5 –∑–∞–ø—Ä–æ—Å–∞ –≤ —Å–µ—Å—Å–∏–∏ * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥–µ–Ω—å / (24 —á–∞—Å–∞ * 60 –º–∏–Ω—É—Ç * 60 —Å–µ–∫—É–Ω–¥) = ~93 RPS`
2. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–π–ª–æ–≤–æ–π –∫–∞—Ä—Ç—ã: `800000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 400 —Ç–∞–π–ª–æ–≤ * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥–µ–Ω—å / (24 —á–∞—Å–∞ * 60 –º–∏–Ω—É—Ç * 60 —Å–µ–∫—É–Ω–¥) = ~7407 RPS`
3. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤: `800000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ —Å–µ—Å—Å–∏–∏ * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥–µ–Ω—å / (24 —á–∞—Å–∞ * 60 –º–∏–Ω—É—Ç * 60 —Å–µ–∫—É–Ω–¥) = ~37 RPS`

–°—É–º–º–∞—Ä–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–∏—Å: `93 + 7407 + 37 = 7537 RPS`

### 2.2.1 –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∞–≥—Ä—É–∑–∫—É —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞. –í —Ä–∞—Å—á–µ—Ç–∞—Ö –±—É–¥–µ–º –ø–æ–ª–∞–≥–∞—Ç—å, —á—Ç–æ:
- –¢–∞–π–ª—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ [^4], –∑–∞–Ω–∏–º–∞—è –ø—Ä–∏ —ç—Ç–æ–º –≤ —Å—Ä–µ–¥–Ω–µ–º 30 –ö–±.
- –û—Ç–≤–µ—Ç—ã –Ω–∞ –≥–µ–æ–∫–æ–¥–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Ç–æ—á–∫—É –Ω–∞ —Ç–∞–π–ª–µ –∏–ª–∏ –∞–¥—Ä–µ—Å, –∑–∞–Ω–∏–º–∞—é—â–∏–π 1 –ö–±.
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –Ω–∞–±–æ—Ä —Ç–æ—á–µ–∫ –Ω–∞ —Ç–∞–π–ª–∞—Ö –∏ –∑–∞–Ω–∏–º–∞—é—Ç –æ–∫–æ–ª–æ 5 –ö–±.
- –ü–∏–∫–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ 2 —Ä–∞–∑–∞.

#### 2.2.1.1 –í—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫
1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–π–ª–∞:
   - –ü–∏–∫–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `1 –ö–± * 2 * 7407 RPS = 14814 –ö–±/—Å = 119 –ú–±–∏—Ç/—Å`
   - –°—É—Ç–æ—á–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `1 –ö–± * 800000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 400 —Ç–∞–π–ª–æ–≤ * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥–µ–Ω—å = 640 –ì–±`
2. –ì–µ–æ–∫–æ–¥–∏–Ω–≥:
   - –ü–∏–∫–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `1 –ö–± * 2 * 93 RPS = 186 –ö–±/—Å = 1.5 –ú–±–∏—Ç/—Å`
   - –°—É—Ç–æ—á–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `1 –ö–± * 800000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 5 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ—Å—Å–∏–∏ * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥–µ–Ω—å = 8 –ì–±`
3. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤:
   - –ü–∏–∫–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `1 –ö–± * 2 * 37 RPS = 74 –ö–±/—Å = 592 –ö–±–∏—Ç/—Å`
   - –°—É—Ç–æ—á–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `1 –ö–± * 800000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ —Å–µ—Å—Å–∏–∏ * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥–µ–Ω—å = 3.2 –ì–±`

| –¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞ | –û–±—ä–µ–º –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (–ö–±) |–ü–∏–∫–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ (–ú–±–∏—Ç/—Å) | –°—É—Ç–æ—á–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ (–ì–±) |
|:---:|:---:|:---:|:---:|
| –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–π–ª–∞ | 1 | 119 | 640 |
| –ì–µ–æ–∫–æ–¥–∏–Ω–≥ | 1 | 1.5 | 8 |
| –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ | 1 | 0.592 | 3.2 |

#### 2.2.1.2 –ò—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫
1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–π–ª–∞:
   - –ü–∏–∫–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `30 –ö–± * 2 * 7407 RPS = 444420 –ö–±/—Å = 3555 –ú–±–∏—Ç/—Å`
   - –°—É—Ç–æ—á–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `30 –ö–± * 800000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 400 —Ç–∞–π–ª–æ–≤ * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥–µ–Ω—å = 21.2 –¢–±`
2. –ì–µ–æ–∫–æ–¥–∏–Ω–≥:
   - –ü–∏–∫–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `1 –ö–± * 2 * 93 RPS = 186 –ö–±/—Å = 1.5 –ú–±–∏—Ç/—Å`
   - –°—É—Ç–æ—á–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `1 –ö–± * 800000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 5 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ—Å—Å–∏–∏ * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥–µ–Ω—å = 8 –ì–±`
3. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤:
   - –ü–∏–∫–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `5 –ö–± * 2 * 37 RPS = 370 –ö–±/—Å = 3 –ú–±–∏—Ç/—Å`
   - –°—É—Ç–æ—á–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞: `5 –ö–± * 800000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ —Å–µ—Å—Å–∏–∏ * 2 –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥–µ–Ω—å = 16 –ì–±`

| –¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞ | –û–±—ä–µ–º –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (–ö–±) |–ü–∏–∫–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ (–ú–±–∏—Ç/—Å) | –°—É—Ç–æ—á–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ (–ì–±) |
|:---:|:---:|:---:|:---:|
| –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–π–ª–∞ | 30 | 3555 | 21200 |
| –ì–µ–æ–∫–æ–¥–∏–Ω–≥ | 1 | 1.5 | 8 |
| –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ | 5 | 3 | 16 |

# 3. –õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞ –ë–î
–õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—É–±–ª–∏—á–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ, –ø–æ—ç—Ç–æ–º—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–π —Å—Ö–µ–º—ã –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è —Å—Ö–µ–º–æ–π, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –≤ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ **OpenStreetMap** (—Å—Ö–µ–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –Ω–∏–∂–µ).
![–õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞ –ë–î](https://wiki.openstreetmap.org/w/images/5/58/OSM_DB_Schema_2016-12-13.svg)

**Nodes** - —Ç–æ—á–∫–∏ –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –∑–µ–º–ª–∏, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–µ —à–∏—Ä–æ—Ç–æ–π –∏ –¥–æ–ª–≥–æ—Ç–æ–π. –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –ª–∏–Ω–∏–π (ways).

**Ways** - –ª–∏–Ω–∏–∏, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–∑ —Ç–æ—á–µ–∫ (nodes), –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º. –û–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ª–∏–Ω–µ–π–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (—Ä–µ–∫–∏, –¥–æ—Ä–æ–≥–∏) –∏ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è "–æ–±–ª–∞—Å—Ç–µ–π" (–ø–æ–ª–∏–≥–æ–Ω–æ–≤). –û–±–ª–∞—Å—Ç–∏ —Å –æ—Ç–≤–µ—Ä—Å—Ç–∏—è–º–∏ –∏–ª–∏ —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –±–æ–ª–µ–µ 2000 —Ç–æ—á–µ–∫ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –æ–¥–Ω–æ–π –ª–∏–Ω–∏–µ–π.

**Relations** - –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –º–Ω–æ–≥–æ—Ü–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—â–∞—è –≤–∑–∞–∏–º–æ—Å–≤—è–∑—å –º–µ–∂–¥—É –¥–≤—É–º—è –∏–ª–∏ –±–æ–ª–µ–µ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ (—Ç–æ—á–∫–∞–º–∏, –ª–∏–Ω–∏—è–º–∏ –∏/–∏–ª–∏ –æ—Ç–Ω–æ—à–Ω–∏—è–º–∏). –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ –∑–¥–∞–Ω–∏—è, –≥—Ä–∞–Ω–∏—Ü—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü, –≥—Ä–∞–Ω–∏—Ü—ã –≥–æ—Ä–æ–¥–æ–≤ –∏ —Ç.–¥.

**Tags** - —Ç–µ–≥–∏, –ø–∞—Ä—ã –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤. –ö–ª—é—á–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±—ã–º–∏, –Ω–æ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏.

# 4. –§–∏–∑–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞ –ë–î
–í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ PostgreSQL. –û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á—Ç–µ–Ω–∏–π –±—É–¥–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π, –ø–æ—ç—Ç–æ–º—É –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ä–µ–ø–ª–∏–∫–∏ —á—Ç–µ–Ω–∏—è. –¢–∞–∫–∂–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ç–∞–±–ª–∏—Ü.

## 4.1. –û—Ü–µ–Ω–∫–∞ QPS

–ü—Ä–∏ –æ—Ü–µ–Ω–∫–µ QPS –±—É–¥–µ–º —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –∞—É–¥–∏—Ç–æ—Ä–∏—è —Å–µ—Ä–≤–∏—Å–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—É–¥–µ—Ç –ø—Ä–æ–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Ç—Ä—ë—Ö –¥–∞—Ç–∞—Ü–µ–Ω—Ç—Ä–∞—Ö, —Ç–æ –µ—Å—Ç—å —á–∏—Å–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ 1 –î–¶ —Å–æ—Å—Ç–∞–≤–∏—Ç 1/3 –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤.

–ó–∞–ø—Ä–æ—Å —Ç–∞–π–ª–∞ —Ç—Ä–µ–±—É–µ—Ç –æ–¥–Ω–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ë–î, –≤ —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–∞–π–ª–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –¥–ª—è —á–µ–≥–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ 5-6 –∑–∞–ø—Ä–æ—Å–æ–≤ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —á–∏—Å–ª–∞ —Å–ª–æ—ë–≤ –≤ —Ç–∞–π–ª–µ) –Ω–∞ —á—Ç–µ–Ω–∏–µ –∫ —Ç–∞–±–ª–∏—Ü–∞–º **nodes**, **relation_mmebers**, **relations**, **way_nodes**, **ways**. –î–æ–ø—É—Å—Ç–∏–º, —á—Ç–æ —á–∏—Å–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —Ä–∞–≤–Ω–æ 5. –¢–∞–∫–∂–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –∫–∞–∂–¥—ã–π 1000–π –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Ç–∞–π–ª, —Ç–æ –µ—Å—Ç—å —á–∏—Å–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–∞–≤–∏—Ç 0.5%.

–¢–æ–≥–¥–∞:
* –ù–∞ —Ç–∞–±–ª–∏—Ü—ã **nodes**, **relation_members**, **relations**, **way_nodes**, **ways**: `5 * 7407 * 0.33 / 1000 = 123 QPS`
* –ù–∞ —Ç–∞–±–ª–∏—Ü—É **tiles**: `7407 * 0.33 = 2450 QPS`

–ó–∞–ø—Ä–æ—Å—ã –∫ **address** –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø—Ä–∏ –≥–µ–æ–∫–æ–¥–∏–Ω–≥–µ, —Ç—Ä–µ–±—É–µ—Ç—Å—è 1 –∑–∞–ø—Ä–æ—Å –∫ —Ç–∞–±–ª–∏—Ü–µ –Ω–∞ 1 –∑–∞–ø—Ä–æ—Å –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞. –ü—Ä–∏ —ç—Ç–æ–º 20% –∑–∞–ø—Ä–æ—Å–æ–≤ –±—É–¥–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å—Å—è, —Ç–æ –µ—Å—Ç—å —á–∏—Å–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Ç–∞–±–ª–∏—Ü–µ —Å–æ—Å—Ç–∞–≤–∏—Ç 0.8%. –¢–æ–≥–¥–∞: `93 * 0.8 * 0.33 = 25 QPS`

–î–æ–ø—É—Å—Ç–∏–º, —á—Ç–æ 75% –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –ø–æ–∏—Å–∫ —Ç–æ—á–∫–∏ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é –∞–¥—Ä–µ—Å–∞. –ó–∞–ø—Ä–æ—Å—ã —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ **address_cache_forward**. –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É —Å–æ—Å—Ç–∞–≤–∏—Ç: `93 * 0.75 * 0.33 = 23 QPS`

–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ **address_cache_reverse** - 25% –∑–∞–ø—Ä–æ—Å–æ–≤, —Ç–æ –µ—Å—Ç—å: `93 * 0.25 * 0.33 = 8 QPS`

–¢–∞–±–ª–∏—Ü—ã **nodes** –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤. –ü—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è 1 –∑–∞–ø—Ä–æ—Å, –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—â–∏–π —Ç–∞–±–ª–∏—Ü—É **nodes**. –ü—Ä–∏ —ç—Ç–æ–º 20% –∑–∞–ø—Ä–æ—Å–æ–≤ –±—É–¥–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ **routes_cache**, —Ç–æ –µ—Å—Ç—å —á–∏—Å–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Ç–∞–±–ª–∏—Ü–∞–º —Å–æ—Å—Ç–∞–≤–∏—Ç 0.8%. –¢–æ–≥–¥–∞: `37 * 0.8 * 0.33 = 10 QPS`

–¢–∞–±–ª–∏—Ü–∞ **routes_cache** –∫—ç—à–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤. –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É —Å–æ—Å—Ç–∞–≤–∏—Ç: `37 * 0.33 = 12 QPS`

| –¢–∞–±–ª–∏—Ü–∞               | QPS   |
|-----------------------|-------|
| address               | 25    |
| address_cache_forward | 23    |
| address_cache_reverse | 8     |
| nodes                 | 123   |
| relations             | 123   |
| relation_members      | 123   |
| routes_cache          | 12    |
| tiles                 | 2450  |
| ways                  | 123   |
| way_nodes             | 123   |

## 4.2. –û—Ü–µ–Ω–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –≤–∫–ª—é—á–∞—é—â–∞—è –≤ —Å–µ–±—è —Ç–∞–±–ª–∏—Ü—ã **nodes**, **relation_members**, **relations**, **way_nodes**, **ways** –∏–º–µ–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä. –î–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≤–º–µ—â–∞—é—â–µ–π –≤—Å—é –ó–µ–º–Ω—É—é –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å, —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤—ã—à–µ —Å—Ö–µ–º–æ–π (—Å—Ö–µ–º–∞ –ø—Ä–∏–≥–æ–¥–Ω–∞ –¥–ª—è OSM PBF —Ñ–æ—Ä–º–∞—Ç–∞ –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö) –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è **1 –¢–ë** –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ [^5].

–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≥—Ä–∞—Ñ–∞ –ø—É—Ç–µ–π (—Ç–∞–±–ª–∏—Ü–∞ **nodes**) –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –º–µ–Ω—å—à–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞, —á–µ–º –¥–ª—è –∏—Å—Ö–æ–¥–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –ø–æ—Å–∫–æ–ª—å–∫—É —É–∑–ª—ã –≥—Ä–∞—Ñ–∞ –Ω–µ —Ö—Ä–∞–Ω—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≥—Ä–∞—Ñ–∞ –ø—É—Ç–µ–π –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è **0.5 –¢–ë** –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞.

–•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–¥—Ä–µ—Å–∞—Ö –∏ –∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö —Ç—Ä–µ–±—É–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –æ–±—ä–µ–º –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–¥—Ä–µ—Å–∞—Ö –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è **450 –ì–ë** –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞. [^6]

–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ç–∞–π–ª–æ–≤ —Å —É—Ä–æ–≤–Ω–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Å 0 –ø–æ 19 –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è **1.5 –¢–ë**. –†–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Ç–∞–π–ª–æ–≤ —Ç–∞–∫–∂–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π. [^7]

–†–∞—Å—Å—á–∏—Ç–∞–µ–º —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤. –ö–∞–∫ –±—ã–ª–æ —É–∫–∞–∑–∞–Ω–æ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—É–Ω–∫—Ç–µ 20% –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ –∫—ç—à–∞, —Ç–æ –µ—Å—Ç—å —á–∏—Å–ª–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –∏–∑ –∫—ç—à–∞:
**–¢–∞–±–ª–∏—Ü–∞ ways**
`way_id (int8) + changeset_id (int8) + timestamp (timestamp(6)) + version (int8) + visible (bool) + redaction_id (int4) = 8 + 8 + 8 + 8 + 1 + 4 = 37 bytes`

**–¢–∞–±–ª–∏—Ü–∞ nodes**
`node_id (int8) + latitude (int4) + longitude (int4) + changeset_id (int8) + visible (bool) + timestamp (timestamp(6)) + tile (int8) + version (int8) + redaction_id (int4) = 8 + 4 + 4 + 8 + 1 + 8 + 8 + 8 + 4 = 49 bytes`

**–¢–∞–±–ª–∏—Ü–∞ way_nodes**
`way_id (int8) + node_id (int8) + version (int8) + sequence_id (int8) = 8 + 8 + 8 + 8 = 32 bytes`

**–¢–∞–±–ª–∏—Ü–∞ way_tags**
`way_id (int8) + k (varchar(255)) + v (varchar(255)) + version (int8) = 8 + 255 + 255 + 8 = 276 bytes`

**–¢–∞–±–ª–∏—Ü–∞ relations**
`relation_id (int8) + changeset_id (int8) + timestamp (timestamp(6)) + version (int8) + visible (bool) + redaction_id (int4) = 8 + 8 + 8 + 8 + 1 + 4 = 37 bytes`

## 4.3. –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Ç–∞–±–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**PostgereSQL**. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö OSM (—Ç–∞–±–ª–∏—Ü—ã nodes, relation_members, relations, way_nodes, ways) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º PostGIS. –ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ PostgreSQL —Å–ø–æ—Å–æ–±–µ–Ω –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å `4500-5000 QPS` [^8], —á—Ç–æ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –≤ `123 QPS`. –û–¥–Ω–∞–∫–æ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä –∏–∑ 2 —É–∑–ª–æ–≤, –æ–¥–∏–Ω –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö master - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö –∏ —á—Ç–µ–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä-–±–µ–∫–µ–Ω–¥–æ–º, –∞ –¥—Ä—É–≥–æ–π slave - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è. –î–ª—è —Å—Ç–æ–ª–±—Ü–æ–≤ —Å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Å—Ç–æ–∏—Ç –ø–æ—Å—Ç—Ä–æ–∏—Ç—å R*-tree –∏–Ω–¥–µ–∫—Å –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–∏—Å–∫–∞.

**Neo4j**. –î–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≥—Ä–∞—Ñ–æ–≤–∞—è Neo4j –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –í –Ω–µ–π —Ä–∞–∑–º–µ—â–µ–Ω—ã *node* —Å—É—â–Ω–æ—Å—Ç–∏. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å Neo4j –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫ 331 QPS –¥–ª—è —Ç–∏–ø–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ [^9] –≤ –∑–∞–¥–∞—á–µ –ø–æ–∏—Å–∫–∞ –∫—Ä–∞—Ç—á–∞–π—à–µ–≥–æ –ø—É—Ç–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å 3.4 –º–ª–Ω. —Ä–µ–±–µ—Ä 0.5 –º–ª–Ω. –Ω–æ–¥., —á—Ç–æ —Å–æ–ø–æ—Å—Ç–∞–≤–∏–º–æ —Å —á–∏—Å–ª–æ–º –Ω–æ–¥ –∏ —Ä–µ–±–µ—Ä –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞ –∑–µ–º–ª–∏. –î–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ü–µ–ª–æ–π –ø–ª–∞–Ω–µ—Ç–µ —Ä–∞–∑–¥–µ–ª—è—Ç—å –±–∞–∑—É –Ω–∞ —à–∞—Ä–¥—ã –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è, –ø–æ—Å–∫–æ–ª—å–∫—É –¥–ª—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è `10 QPS/ 331 QPS = 1` —à–∞—Ä–¥. –ò—Ç–æ–≥–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–ª–∞—Å—Ç–µ—Ä –∏–∑ 1 —É–∑–ª–∞.

**Pelias**. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–¥—Ä–µ—Å–∞—Ö –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö (*address* —Ç–∞–±–ª–∏—Ü–∞) –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–ª—è –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞ Pelias. –°–æ–≥–ª–∞—Å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤–º–µ—â–∞—é—â—É—é –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—Å–µ–π –ó–µ–º–ª–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 12 —à–∞—Ä–¥–æ–≤ (—Ä–∞–∑–º–µ—Ä —à–∞—Ä–¥–∞ –Ω–µ –±–æ–ª–µ–µ 50 –ì–ë) [^6].   

**Redis**. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∞–π–ª–æ–≤ (*tiles*) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Redis. Redis —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏, –µ—Å–ª–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–µ—Ä–≤–µ—Ä–∞ —Å 128 –ì–ë RAM, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–ª–∞—Å—Ç–µ—Ä –∏–∑ 12 –º–∞—Å—Ç–µ—Ä –Ω–æ–¥ (`1500 –ì–ë / 128 –ì–ë = 12`). –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ 1 –Ω–æ–¥—É `2450 QPS / 12 = 205 QPS`, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–µ–º–ª–µ–º–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π –¥–ª—è Redis - –ø—Ä–∏ 30 —Ç—ã—Å. —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π Redis –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `60000 QPS` [^10].  –î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–π master –Ω–æ–¥–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ —Å—Ç–æ–∏—Ç –ø—Ä–µ–¥–∞—Ç—å slave –Ω–æ–¥—É. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–ª–∞—Å—Ç–µ—Ä –Ω–∞ 24 –Ω–æ–¥—ã.

–î–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è (—Ç–∞–±–ª–∏—Ü—ã *routes_cache*, *addres_cache_reverse*, *addres_cache_forward*) —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Redis. –°—É–º–º–∞—Ä–Ω—ã–π QPS –Ω–∞ —ç—Ç–∏ —Ç–∞–±–ª–∏—Ü—ã - 37, –¥–∞–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –æ–¥–∏–Ω —É–∑–ª–æ–º Redis, –æ–¥–Ω–∞–∫–æ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 2 master-slave —É–∑–ª–∞.

# 5. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

## 5.1. –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö

* Neo4j - –≥—Ä–∞—Ñ–æ–≤–∞—è –°–£–ë–î, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ –≥—Ä–∞—Ñ–∞. –ò–º–µ–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è.
* Pelias - –≥–µ–æ-–ø–æ–∏—Å–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Elasticsearch –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
* Redis - –Ω–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—ç—à–∞.
* PostgreSQL - –Ω–∞–¥–µ–∂–Ω–∞—è –∏ —à–∏—Ä–æ–∫–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω–∞—è –ë–î. –ò–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏.

## 5.2 Backend

–í –∫–∞—á–µ—Å—Ç–≤–µ —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è golang, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –æ–±–ª–∞–¥–∞–µ—Ç –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, —Ö–æ—Ä–æ—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏ –ø—Ä–æ—Å—Ç–æ—Ç–æ–π –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.
–í –∫–∞—á–µ—Å—Ç–≤–µ –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è gin.
–î–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ç–∞–π–ª–æ–≤ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è C++ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–ª–∏ –∏—Ö –±–∏–Ω–¥–∏–Ω–≥–∏ –¥–ª—è golang.

## 5.3 Frontend

–í –∫–∞—á–µ—Å—Ç–≤–µ —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è TypeScript. –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: Angular –∏ Redux. Angular –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–æ–≥–∞—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞, –±–æ–≥–∞—Ç—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —É–¥–æ–±—Å—Ç–≤–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.  Redux –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–æ–±–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## 5.4 –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

–î–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è nginx. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç L7 –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ—Å–∞, –∞ —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.

# 6. –°—Ö–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞

<center><img src="./diagrams/ProjectScheme.png"></center>

–°–µ—Ä–≤–∏—Å –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –°–ù–ì, –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏–∑ –†–æ—Å—Å–∏–∏, –ø–æ—ç—Ç–æ–º—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∞ –≤ –¥–≤—É—Ö –¥–∞—Ç–∞—Ü–µ–Ω—Ç—Ä–∞—Ö: –≤ –ú–æ—Å–∫–≤–µ –∏ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–∏–π –¥–∞—Ç–∞—Ü–µ–Ω—Ç—Ä —Å –ø–æ–º–æ—â—å—é Latency based DNS Amazon Route 53. –î–∞–ª–µ–µ –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ Ngnix L7 –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–º. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç URL, –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É Round Robin –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å—É –∫–ª–∞—Å—Ç–µ—Ä–∞.

* –í —Å–ª—É—á–∞–µ –∑–∞–ø—Ä–æ—Å–∞ —Ç–∞–π–ª–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ–∏—Å–∫ –≤ Redis. –ï—Å–ª–∏ —Ç–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Ç–æ –æ–Ω –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –±—ç–∫–µ–Ω–¥, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL.
* –í —Å–ª—É—á–∞–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ/–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ–∏—Å–∫ –≤ –∫–µ—à–µ Redis. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ –±—ã–ª –Ω–∞–π–¥–µ–Ω, –±—ç–∫–µ–Ω–¥ –≥–æ—Ç–æ–≤–∏—Ç –æ—Ç–≤–µ—Ç, –æ–±—Ä–∞—â–∞—è—Å—å –∫ Pelias –∏–ª–∏ Neo4j.

# 7. –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤

–ë—É–¥–µ–º —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Latency based DNS Amazon Route 53 –Ω–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –ø–æ –¥–∞—Ç–∞—Ü–µ–Ω—Ç—Ä–∞–º. –ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –¥–ª—è –æ–¥–Ω–æ–≥–æ –¥–∞—Ç–∞—Ü–µ–Ω—Ç—Ä–∞:

* **–ö–ª–∞—Å—Ç–µ—Ä Pelias**. –ü–æ–∏—Å–∫ - —ç—Ç–æ CPU intensive –æ–ø–µ—Ä–∞—Ü–∏—è, –ø–æ—ç—Ç–æ–º—É **8 CPU 32 GB RAM** Pelias –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç 250 RPS. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è 25 QPS / 250 < 1 —Å–µ—Ä–≤–µ—Ä —Å —Ä–µ–ø–ª–∏–∫–∞–º–∏, –ø–ª—é—Å 1 —Ä–µ–∑–µ—Ä–≤–Ω—ã–π. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **1 TB SSD**.
* **–ö–ª–∞—Å—Ç–µ—Ä PostgreSQL**. –î–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ 2 —Å–µ—Ä–≤–µ—Ä–∞, –∫–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ –≤ –ø. 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è **16 CPU 32 GB RAM 1 TB SSD** –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π.
* **–ö–ª–∞—Å—Ç–µ—Ä Redis (–¥–ª—è —Ç–∞–π–ª–æ–≤)**. –†–∞–∑–º–µ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞, —Å–æ–≥–ª–∞—Å–Ω–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º —Ä–∞–Ω–µ–µ –¥–∞–Ω–Ω—ã–º, —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 24 —É–∑–ª–∞. –°–µ—Ä–≤–µ—Ä–∞–º –≤ —ç—Ç–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ –Ω—É–∂–Ω–æ –º–Ω–æ–≥–æ RAM, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: **8 CPU, 128 GB RAM, 500 GB SSD**.
* **–ö–ª–∞—Å—Ç–µ—Ä Neo4j**. –†–∞–Ω–µ–µ –±—ã–ª–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, —á—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Neo4j —Ç—Ä–µ–±—É–µ—Ç 1 —É–∑–µ–ª. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—ã–¥–µ–ª–∏–º –ø–æ–¥ –∫–ª–∞—Å—Ç–µ—Ä 1 —Å–µ—Ä–≤–µ—Ä: **16 CPU, 32 RAM, 500 GB SSD**.
* **–ö–ª–∞—Å—Ç–µ—Ä Redis (–¥–ª—è route/geocoding)**. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–µ—à–∞ —Å —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è 2 —Å–µ—Ä–≤–µ—Ä–∞: **8 CPU, 64 GB, 128 GB SSD**.
* **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏**. –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Nginx –ø–æ–∫–∞–∑–∞–ª–∏, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å 24 CPU —Å–ø–æ—Å–æ–±–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å 10274 HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è 1 —Å–µ—Ä–≤–µ—Ä: **24 CPU, 64 GB RAM, 500 GB SSD**.
* **–ë—ç–∫–µ–Ω–¥ (–¥–ª—è route/geocoding)**. –û–∂–∏–¥–∞–µ–º–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –±—ç–∫–µ–Ω–¥ —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ —ç—Ç–æ–π –≥—Ä—É–ø–ø—ã (–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –≥–µ–æ–∫–æ–¥–∏–Ω–≥): `(93 + 37) * 0.5 = 65 RPS`. –ò–∑–≤–µ—Å—Ç–Ω—ã –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ RPS –¥–ª—è **8 CPU, 16 GB. 128 GB SSD** —Å–µ—Ä–≤–µ—Ä–∞, –≤ —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Gin —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –∏ –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–Ω–∏–º–∞—é—â–∏—Ö ~100 –º—Å: `10000 RPS` [^11]. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä —Å–ø–æ—Å–æ–±–µ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å—é –Ω–∞–≥—Ä—É–∑–∫—É –¥–∞–∂–µ –≤ —Å–ª—É—á–∞–µ –ø–∏–∫–æ–≤–æ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –≤ 2 —Ä–∞–∑–∞.
* **–ë—ç–∫–µ–Ω–¥ (–¥–ª—è —Ç–∞–π–ª–æ–≤)**. –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –¥–∞–Ω–Ω—É—é –≥—Ä—É–ø–ø—É –±–µ–∫–µ–Ω–¥ —Å–µ—Ä–≤–µ—Ä–æ–≤ `7407 * 0.5 = 3204 RPS`. –î–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∞ —Ç–∞–π–ª–æ–≤, —Ç.–æ. –ø–æ–ª–æ–∂–∏–º –≤–æ–∑–º–æ–∂–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ **8 CPU, 16 GB, 128 GB SSD** - `8000 RPS `[^11]. –ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è 1 —Ç–∞–∫–æ–π —Å–µ—Ä–≤–µ—Ä.

| –¢–∏–ø                         | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è                     | –û–±—â–µ–µ —á–∏—Å–ª–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ |
|-----------------------------|----------------------------------|----------------------|
| Pelias                      | 8 CPU, 32 GB RAM, 1 TB SSD       | 2                    |
| PostgreSQL                  | 16 CPU, 32 GB RAM, 1 TB SSD      | 2                    |
| Redis (—Ç–∞–π–ª—ã)               | 8 CPU, 128 GB RAM, 500 GB SSD    | 24                   |
| Neo4j                       | 16 CPU, 32 GB RAM, 500 GB SSD    | 1                    |
| Redis (–º–∞—Ä—à—Ä—É—Ç—ã, –≥–µ–æ–∫–æ–¥–∏–Ω–≥) | 8 CPU, 64 GB RAM, 128 GB SSD     | 2                    |
| –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏              | 24 CPU, 64 GB RAM, 500 GB SSD    | 1                    |
| –ë—ç–∫–µ–Ω–¥ (–º–∞—Ä—à—Ä—É—Ç—ã, –≥–µ–æ–∫–æ–¥–∏–Ω–≥)| 8 CPU, 16 GB RAM, 128 GB SSD     | 1                    |
| –ë—ç–∫–µ–Ω–¥ (—Ç–∞–π–ª—ã)              | 8 CPU, 16 GB RAM, 128 GB SSD     | 1                    |
| **–ò—Ç–æ–≥–æ**                   |                                  | **34**               |

# 8. –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
[^1]: [–ë–∞–Ω–Ω–µ—Ä –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞—Ö - –ì–µ–æ—Ä–µ–∫–ª–∞–º–∞ –Ω–∞ –Ø–Ω–¥–µ–∫—Å–µ](https://yandex.ru/adv/products/geo/maps-banner)
[^2]: [–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –¥–æ–ª—è —Ä—ã–Ω–∫–∞ maps.yandex.ru | Similarweb](https://www.similarweb.com/ru/website/maps.yandex.ru/)
[^3]: [MapRecorder: analysing real-world usage of mobile map applications](https://www.tandfonline.com/doi/epub/10.1080/0144929X.2020.1714733?needAccess=true)
[^4]: [–ö–∞–∫ –º—ã –¥–µ–ª–∞–µ–º –∫–∞—Ä—Ç—É –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞—Ä—Ç—É / –•–∞–±—Ä](https://habr.com/ru/company/2gis/blog/341508/)
[^5]: [Serving Tiles ‚Äì Switch2OSM](https://switch2osm.org/serving-tiles/)
[^6]: [Considerations for full-planet builds](https://github.com/pelias/documentation/blob/master/full_planet_considerations.md)
[^7]: [Tile disk usage](https://wiki.openstreetmap.org/wiki/Tile_disk_usage)
[^8]: [Fine tuning Postgres to achieve 5,000 Queries per second](http://ashnik.com)
[^9]: [Graphdb benchmarks](https://github.com/socialsensor/graphdb-benchmarks)
[^10]: [Redis benchmark](https://redis.io/docs/reference/optimization/benchmarks/) 
[^11]: [go-web-framework-benchmark](https://github.com/smallnest/go-web-framework-benchmark) 